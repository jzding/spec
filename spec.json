{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://example.com/product.schema.json",
    "type": "object",
    "definitions": {
        "iddef": {
            "type": "string",
            "minLength": 1
        },
        "timedef": {
            "type": [
                "string",
                "null"
            ],
            "format": "date-time",
            "minLength": 1
        },
        "specversiondef": {
            "type": "string",
            "minLength": 1
        },
        "typedef": {
            "type": "string",
            "minLength": 1
        },
        "datadef": {
            "type": [
                "object",
                "string",
                "number",
                "array",
                "boolean",
                "null"
            ]
        },
        "endpointuridef": {
            "type": [
                "string",
                "null"
            ],
            "format": "uri-reference",
            "minLength": 1
        },
        "urilocationdef": {
            "type": [
                "string",
                "null"
            ],
            "format": "uri-reference",
            "minLength": 1
        },
        "resourcedef": {
            "type": "string",
            "pattern": "([^\/]+(\/{2,}[^\/]+)?)",
            "minLength": 1
        },
        "valuetypedef": {
            "value_type": {
                "additionalProperties": false,
                "enum": [
                    "enumeration",
                    "decimal64.3"
                ]
            }
        },
        "ptp-sync-state": {
            "value": {
                "additionalProperties": false,
                "enum": [
                    "LOCKED",
                    "HOLDOVER",
                    "FREERUN"
                ]
            }
        },
        "os-clock-sync-state": {
            "value": {
                "additionalProperties": false,
                "enum": [
                    "LOCKED",
                    "HOLDOVER",
                    "FREERUN"
                ]
            }
        },
        "syncee-lock-state": {
            "value": {
                "additionalProperties": false,
                "enum": [
                    "LOCKED",
                    "UNLOCKED"
                ]
            }
        },
        "gnss-sync-state": {
            "value": {
                "additionalProperties": false,
                "enum": [
                    "SYNCHRONIZED",
                    "ACQUIRING-SYNC",
                    "ANTENNA-DISCONNECTED",
                    "BOOTING",
                    "ANTENNA-SHORT_CIRCUIT"
                ]
            }
        },
        "decimaldef": {
            "value": {
                "additionalProperties": false,
                "type": "number"
            }
        }
    },
    "properties": {
        "subscriptionid": {
            "description": "Identifies the subscription and publisher",
            "$ref": "#/definitions/iddef",
            "examples": [
                "789be75d-7ac3-472e-bbbc-6d62878aad4a"
            ]
        },
        "specversion": {
            "description": "The version of the o-ran event specification which the event uses.",
            "$ref": "#/definitions/specversiondef",
            "examples": [
                "1.0"
            ]
        },
        "resource": {
            "description": "The resource address specifies the event producer with a hierarchical path. ",
            "$ref": "#/definitions/resourcedef",
            "examples": [
                "1.0"
            ]
        },
        "endpointuri": {
            "description": "Endpoint URI (a.k.a callback URI), e.g. http://localhost:8080/resourcestatus/ptp",
            "$ref": "#/definitions/endpointuridef",
            "examples": [
                "http://localhost:8080/ptp/alert"
            ]
        },
        "urilocation": {
            "description": "The url location  to fetc subscription/producer information.",
            "$ref": "#/definitions/urilocationdef",
            "examples": [
                "http://localhost:9090/api/oranevenet/subscription/789be75d-7ac3-472e-bbbc-6d62878aad4a"
            ]
        },
        "type": {
            "description": "Describes the type of o-ran event related to the originating occurrence.",
            "$ref": "#/definitions/typedef",
            "examples": [
                "com.github.pull_request.opened",
                "com.example.object.deleted.v2"
            ]
        },
        "time": {
            "description": "Timestamp of when the occurrence happened. Must adhere to RFC 3339.",
            "$ref": "#/definitions/timedef",
            "examples": [
                "2018-04-05T17:31:00Z"
            ]
        },
        "data": {
            "description": "Array of JSON objects defining the information for the event",
            "type": "array",
            "minItems": 1,
            "additionalItems": false,
            "items": {
                "type": "object",
                "properties": {
                    "version": {
                        "description": "The version of the O-RAN Event specification which the event uses.",
                        "$ref": "#/definitions/specversiondef",
                        "examples": [
                            "1.0"
                        ]
                    },
                    "resource": {
                        "description": "The version of the O-RAN Event specification which the event uses.",
                        "$ref": "#/definitions/resourcedef",
                        "examples": [
                            "/sync/sync-status/sync-state"
                        ]
                    },
                    "data_type": {
                        "description": "The version of the O-RAN Event specification which the event uses.",
                        "enum": [
                            "notification",
                            "metric"
                        ]
                    },
                    "value_tyep": {
                        "description": "The value type either enum or decimal",
                        "$ref": "#/definitions/valuetypedef"
                    },
                    "value": {
                        "description": "The version of the O-RAN Event specification which the event uses.",
                        "value_type": {
                            "anyOf": [
                                {
                                    "properties": {
                                        "data_type": {
                                            "const": "notification"
                                        },
                                        "value": {
                                            "const": "enumeration"
                                        }
                                    },
                                    "anyOf": [
                                        {
                                            "$ref": "#/definitions/ptp-sync-state"
                                        },
                                        {
                                            "$ref": "#/definitions/os-clock-sync-state"
                                        },
                                        {
                                            "$ref": "#/definitions/syncee-lock-state"
                                        },
                                        {
                                            "$ref": "#/definitions/gnss-sync-state"
                                        }
                                    ]
                                },
                                {
                                    "properties": {
                                        "data_type": {
                                            "const": "metric"
                                        },
                                        "value": {
                                            "const": "decimal64.3"
                                        }
                                    },
                                    "$ref": "#/definitions/decimaldef"
                                }
                            ]
                        }
                    }
                },
                "required": [
                    "version",
                    "data_type",
                    "resource",
                    "value_type",
                    "value"
                ],
                "additionalProperties": false
            }
        }
    }
}